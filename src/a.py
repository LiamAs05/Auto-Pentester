from src.spider.analyzer.analyzer import Analyzer
from src.spider.plugins_manager import PluginManager

import requests
import threading

BASE_URL = 'http://google.com'
PARENT_URL = BASE_URL

pages = set()
route_to_parse = dict()
blacklist = set()
auth = ('username123', 'password123')

pages_lock = threading.Lock()
route_to_parse_lock = threading.Lock()

elements = PluginManager.get_plugins()

res = requests.get(BASE_URL)
cookies = dict()

Analyzer.parse_page(res, BASE_URL, '/', PARENT_URL, elements, pages, route_to_parse, blacklist, pages_lock,
                    route_to_parse_lock, auth, True, False)

print(pages.pop())
