import unittest

from src.classificator.classificator import Classificator
import requests


class MyTestClassificator(unittest.TestCase):
    def test_is_login(self):
        auth = ('username', 'password')

        login_urls = [
            'https://myuncchart.org/MyChart/Authentication/Login?',
            'https://myhealthatvanderbilt.com/Authentication/Login?',
            'https://dribbble.com/session/new?return_to=%2Ftags%2Flogin',
            'https://www.ssbjk.org.in/login.aspx'
        ]

        just_urls = [
            'https://google.com',
            'https://reddit.com',
            'https://ynet.co.il'
        ]

        for login_url in login_urls:
            res = requests.get(login_url)
            is_login, action, payloads = Classificator.is_login_page(res, auth)

            self.assertTrue(is_login)

        for login_url in just_urls:
            res = requests.get(login_url)
            is_login, action, payloads = Classificator.is_login_page(res, auth)

            self.assertFalse(is_login)


if __name__ == '__main__':
    unittest.main()
